/*!
 * Soma FontFriend 3.2
 * http://somadesign.ca/projects/fontfriend
 *
 * Copyright (c) 2009-12 Matt Wiebe
 * Licensed under the MIT license
 * http://www.opensource.org/licenses/mit-license.php
 *
 * Uses some code (c) 2009-10 Ryan Seddon from
 * http://labs.thecssninja.com/font_dragr/
 * Licensed under the MIT license
 *
*/
(function(C,f){var s,m,y,n="undefined",A={version:"3.2",css:"#font-friend{overflow:hidden;position:fixed;bottom:0;left:30px;background-color:#fff;background-color:rgba(255,255,255,0.93);width:600px;color:#222;-webkit-box-shadow:1px 1px 5px rgba(0,0,0,.3);-moz-box-shadow:1px 1px 5px rgba(0,0,0,.3);box-shadow:1px 1px 5px rgba(0,0,0,.3);z-index:10000;text-align:left;height:100px}#font-friend,#ff-drop h6,#ff-drop li{line-height:1.5!important}#ff-drop{padding:12px 12px 12px 36px}#ff-toggle{background-color:#900;color:#eee;display:block;width:14px;height:14px;padding:0;position:absolute;top:0;left:0;font-size:8px;text-align:center;line-height:1!important;cursor:pointer;z-index:10001;-moz-transition:.25s all ease-in-out;-webkit-transition:.25s all ease-in-out;-o-transition:.25s all ease-in-out;transition:.25s all ease-in-out}#ff-toggle sup{font-size:13px;line-height:1!important;vertical-align:super;display:none}.open #ff-toggle sup{display:inline}#ff-toggle:hover{color:#fff;background-color:#c00}#ff-drop form{background:0;color:inherit;float:none}#ff-drop h6{font-size:13px;border-bottom:1px solid #dedede;margin:0 0 6px!important;padding:0!important;text-indent:0!important;float:none!important;height:1.5em!important;white-space:nowrap}#ff-drop>div{float:left;width:120px;padding-right:20px;margin:0!important;position:relative}#ff-drop>div.wrap>div{margin-bottom:12px;font-size:11px!important;position:relative}#ff-drop div#ff-selector{width:130px}#ff-drop div#ff-font-family{width:240px}#ff-selector p{font-size:9px!important;line-height:1.2!important;margin:1em 0 0!important;padding:0!important}#ff-controls{position:absolute!important;bottom:60px;left:65px;width:55px!important;height:60px;margin:0!important;padding:0!important}#ff-controls div{position:absolute;font-size:20px;width:1em;height:1em;color:#555;min-width:inherit!important;min-height:inherit!important;padding:0;margin:0;float:none;text-align:center}#ff-controls>div,.ff-toggler>span,#family-custom-add{font-family:sans-serif!important;font-weight:normal!important;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer}#ff-controls div:hover{color:#000}#ff-controls .up{left:1em;top:0}#ff-controls .down{left:1em;bottom:0}#ff-controls .left{left:0;top:1em}#ff-controls .right{right:-.25em;top:1em}#ff-drop #ff-font-family ul{float:left;width:110px;padding-right:5px}#ff-drop #ff-font-family ul#ff-font-family-sans{padding-right:10px;width:115px}#ff-drop ol li{list-style:none outside}#ff-drop ol,#ff-drop ul{margin:0;padding:0}#ff-drop li{font-size:11px!important; margin:0!important;padding:0!important;list-style:none outside none!important;text-indent:0!important;height:auto!important}#ff-drop li.core{margin-bottom:4px!important;padding:0!important}#ff-drop ul li:hover{cursor:pointer;background-color:#e6e6e6!important}#ff-drop ul li.family-custom{margin:12px 0 0!important}#ff-drop ul li.family-custom:hover{cursor:default;background:none!important}#family-custom-add{display:inline-block;color:#aaa;line-height:1!important;font-size:15px!important;color:#666!important;vertical-align:top;padding:1px 3px 3px}#family-custom-add:hover,#family-custom-add:focus{background-color:#555!important;color:#fff!important}#family-custom{width:85px}#ff-drop ol input[type=radio]{margin-left:-5px;width:auto!important}#ff-blah{width:100px;margin-left:5px}#ff-drop ol label{margin-left:5px;display:inline!important}#ff-drop>#ff-credit{position:absolute;bottom:21px;left:32px;font-size:9px;margin:0!important}#font-friend a{color:#4c0003!important;text-decoration:underline!important;border:0!important}#font-friend a:hover{color:#a60007!important}#ff-drop>#ff-clear{position:absolute;bottom:0;right:0;padding:5px 5px 0!important;text-decoration:line-through;opacity:.1;font-size:21px;margin:0!important;width:auto!important}#ff-clear:hover{opacity:1;cursor:pointer}#ff-font-drop{-webkit-border-horizontal-spacing:0;-webkit-border-vertical-spacing:0;-webkit-user-select:none;background-color:#d14836;background-image:-webkit-linear-gradient(top,#dd4b39,#d14836);border-bottom-color:transparent;border-bottom-left-radius:2px;border-bottom-right-radius:2px;border-bottom-style:solid;border-bottom-width:1px;border-collapse:separate;border-left-color:transparent;border-left-style:solid;border-left-width:1px;border-right-color:transparent;border-right-style:solid;border-right-width:1px;border-top-color:transparent;border-top-left-radius:2px;border-top-right-radius:2px;border-top-style:solid;border-top-width:1px;color:white;cursor:default;display:inline-block;font-family:arial,sans-serif;font-size:11px;font-weight:bold;height:50px;line-height:27px;margin-right:1px;min-height:0;min-width:54px;outline-color:white;outline-style:none;outline-width:0;overflow-x:visible;overflow-y:visible;padding-bottom:0;padding-left:8px;padding-right:8px;padding-top:0;position:relative;text-align:center;text-shadow:rgba(0,0,0,0.0976563) 0 1px 0;text-transform:uppercase;vertical-align:top;width:100px}#ff-font-drop.dropzone{background-color:red;border-color:#111}#ff-drop select{width:105px!important;margin-left:15px!important}#ff-google-webfonts select{width:99%!important;margin:0!important}#ff-drop select option{font-size:10px!important}#ff-drop .ff-hidden{display:none}#ff-drop .ff-clickable{cursor:pointer;position:relative;z-index:2}#ff-font-family h6 span{text-transform:uppercase!important;font-size:75%;font-weight:normal!important;color:#111!important;letter-spacing:.02em;line-height:1;display:inline-block}#ff-font-family h6 .ff-active{color:#aaa!important}#ff-font-family .ff-custom{padding:0 6px;border-right:1px solid #bbb;margin-right:6px}#ff-badges{position:absolute;right:14px;top:0;z-index:14px}#ff-badges>img{padding:0 4px 0 0!important;margin:0!important;border:0!important;width:16px!important;height:16px!important}#ff-drop #ff-font-family #ff-font-family-custom{width:100%;-webkit-column-count:2;-moz-column-count:2;column-count:2;-webkit-column-gap:12px;-moz-column-gap:12px;column-gap:12px}.ff-toggler{position:absolute;height:20px;top:27px;left:-4px}.ff-toggler span{position:absolute;display:block;left:0;top:0;height:8px;width:8px;line-height:1!important;font-size:8px!important;text-align:center;color:#aaa!important;padding:2px 4px!important}.ff-toggler span:hover{color:#333!important}.ff-toggler span.ff-down{top:auto;bottom:0}#ff-drop [data-ff=fontFamily] li{height:1.5em!important;overflow:hidden;text-overflow:ellipsis}",html:'<div id="ff-drop">    <span id="ff-toggle">_</span><div id="ff-selector" style="display:none"><h6>Selector</h6><form action="" method="get"><ol><li><input type="radio" name="jq-select" checked="checked" id="jq1"><label for="jq1">*</label></li></ol></form></div><div id="ff-font-family"><h6>Change Fonts To</h6><ul id="ff-font-family-sans" data-ff="fontFamily"><li>Arial</li><li>Droid Arabic Naskh</li></ul></div><div class="wrap"><div id="ff-google-webfonts"><h6>Google Web Fonts</h6><div>Loadingâ€¦</div></div>    <div id="ff-credit">Based on <a href="http://somadesign.ca/projects/fontfriend/" title="Soma FontFriend homepage">FontFriend</a></div></div><div class="wrap"><div id="ff-font-face"><h6>From Your Harddisk</h6><div id="ff-font-drop">Drag a font here</div><ul data-ff="fontFamily"></ul></div></div></div>',customFamiles:false,customFamilyMap:[],googleFamilies:{},existingGoogleFamilies:[]};
function a(){if(typeof(C.jQuery)===n){var N=f.createElement("script");N.src="//ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js";f.getElementsByTagName("head")[0].appendChild(N);y=setInterval(H,100)}else{L()}}a();function H(){if(typeof(C.jQuery)!==n){clearInterval(y);L()}}function L(){s=C.jQuery;if(s("#font-friend").size()!==0){return false}m=s("body");s("head").append('<style id="font-friend-stylesheet" type="text/css" media="screen">'+A.css+"</style>");m.append("<div id='font-friend'></div>");s("#font-friend").html(A.html).addClass("open");k();l();j();K();t();M();I()}function z(N){var O,P;O=f.getElementsByTagName("head")[0];if(!O){return}P=f.createElement("link");P.type="text/css";P.rel="stylesheet";P.href=N;O.appendChild(P)}function I(){var N="https://www.googleapis.com/webfonts/v1/webfonts?key=AIzaSyBUK3PeqSEzwPNIyg94dBQpziFOPvm7-aA",P=[],Q=function(R){if(R.kind==="webfonts#webfontList"){s.each(R.items,function(S,T){if(s.inArray(T.family,A.existingGoogleFamilies)!==-1){T.family="- "+T.family}else{A.googleFamilies[T.family]=T.variants}P.push(T.family)});x(P)}else{O()}},O=function(){s("#ff-google-webfonts > div").html("Error loading webfonts. :(");setTimeout(function(){s("#ff-google-webfonts").fadeOut()},3500)};s.ajax({url:N,type:"GET",dataType:"jsonp",success:Q,error:O})}function x(O){var N=['<option value="0">Choose:</option>'],O;s.each(O,function(Q,P){N.push("<option>"+P+"</option>")});O=s("<select>"+N.join("")+"</select>");O.change(i);s("#ff-google-webfonts > div").html(O)}function i(){var O=s(this),S=O.val(),N=S.replace(/ /g,"+"),Q="http://fonts.googleapis.com/css?family=",R,P;if(S==="0"||!A.googleFamilies[S]){return}R=":"+A.googleFamilies[S].join(",");P=Q+N+R;s('<link rel="stylesheet" type="text/css" href="'+P+'" >').appendTo("head");B([S],"www.google.com");O.find(":selected").text("- "+S);s("#ff-font-family-custom").find("li:last").click();delete A.googleFamilies[S]}function M(){G();u();F();E()}function G(){var N=f.styleSheets||[],O=[];s.each(N,function(P,R){try{s.each(R.cssRules,function(T,U){if(U.type===CSSRule.FONT_FACE_RULE){var S=U.style.getPropertyValue("font-family");if(S){S=S.replace(/^"|'/,"").replace(/"|'$/,"");if(S!=="testfont"){O.push(S)}}}})}catch(Q){}});if(O.length>0){B(d(O))}}function l(){if(typeof(fontFriendFamilies)!==n){A.customFamilies=fontFriendFamilies;if(!s.isArray(A.customFamilies)){var N=[];s.each(A.customFamilies,function(O,P){N.push(O)});A.customFamilies=N;A.customFamilyMap=fontFriendFamilies}}else{if(m.attr("data-ff-families")){A.customFamilies=m.attr("data-ff-families").split(",")}}}function t(){A.wfs=(C.location.href=="http://webfontspecimen.com/demo/");A.wfsName=(A.wfs)?s("h1, .bodysize tr:first-child th:first-child"):false;if(!A.wfs&&s("body").attr("id")=="soma-web-font-specimen"){A.wfs=true;A.wfsName=s("h1, .bodysize tr:first-child th.base")}if(A.wfs){A.wfsOriginalName=s("h1").text();A.wfsTitle=s("title").text()}}function j(){s("#font-friend").find("select").each(function(N){var O=s('<span class="ff-toggler"><span class="ff-up" title="Increase">&#9650;</span><span class="ff-down" title="Decrease">&#9660;</span></span>');O.insertBefore(this)});s(".ff-toggler span").click(o)}function o(O){var N=s(this),S=O.target.className=="ff-up",R=N.parent().next(),P=R.find(":selected"),Q;Q=(S)?P.next():P.prev();if(Q.size()==0){Q=(S)?R.find(":first"):R.find(":last")}Q.attr("selected","selected");R.trigger("change")}function E(){var N=p(),O;if(!N){return}s.getJSON("http://www.typotheque.com/ajax/webfont_api.php?key="+N,function(P){console.log(P)})}function p(){var N=false;s('link[href*="wf.typotheque.com"]').each(function(){N=s(this).attr("href").split("/").pop();return false});return N}function F(){var N=b(),P,O=[];if(!N){return}P=N.split("family=").pop();s.each(P.split("|"),function(R,Q){O.push(Q.split(":")[0].replace("+"," "))});if(O.length>0){B(O,"www.google.com");A.existingGoogleFamilies=O}}function b(){var N=false;s('link[href*="fonts.googleapis.com"]').each(function(){N=s(this).attr("href");
return false});return N}function J(){var N=null;s("script").each(function(P){var O=this.src.match(/use\.typekit\.com\/(.+)\.js/);if(O){N=O[1];return false}});return N}function u(){var N=J();if(!N){return false}s.getJSON("https://typekit.com/api/v1/json/kits/"+N+"/published?callback=?",function(O){if(!O.errors){var P=[];s.each(O.kit.families,function(Q,R){A.customFamilyMap[R.name]=R.css_names.join(",");P.push(R.name)});B(P,"typekit.com")}})}function c(N){var Q="//"+N+"/favicon.ico",O=s("#ff-badges"),P=O.find("[src='"+Q+"']");if(!P.length){s("<img />",{src:Q}).appendTo(O)}}function B(T,O){var N=s("#ff-font-family-custom"),R=s('<ul id="ff-font-family-custom" data-ff="fontFamily"></ul>'),Q="",P="Click to toggle between custom & stock font families",S=': <span class="ff-custom ff-active">Custom</span><span class="ff-stock">Stock</span>';s.each(T,function(U,V){Q+="<li>"+V+"</li>"});if(typeof(O)!==n){c(O)}if(N.size()===1){N.append(Q);return K()}Q=R.append(Q);s("#ff-font-family").append(Q);s("#ff-font-family > h6").click(function(){var V=s(this),Y=V.hasClass("ff-custom")?true:false,ab=s("#ff-font-family-sans"),X=s("#ff-font-family-sans, #ff-font-family-sans"),Y=!ab.is(":visible"),Z=V.children(),aa=100,W,U;if(Y){W=X;U=ab}else{W=ab;U=X}Z.toggleClass("ff-active");W.fadeOut(aa,function(){U.fadeIn(aa)})});K();s("#ff-font-family > h6").click()}if(A.customFamilies){B(A.customFamilies)}function D(N){if(!A.wfs){return false}if(!N){A.wfsName.text(A.wfsOriginalName);s("title").text(A.wfsTitle)}else{A.wfsName.text(N);s("title").text(A.wfsTitle.replace("Font name",N))}}function h(N){if(typeof(A.customFamilyMap[N])!==n){N=A.customFamilyMap[N]}return N+",monospace"}function K(){s("#ff-font-family li, #ff-font-face li").each(function(){var N=s(this);N.css("fontFamily",h(N.text()))});s("#ff-font-style li, #ff-text-transform li, #ff-font-variant li").each(function(){var O=s(this),N=O.parent().data("ff"),P=O.text();O.css(N,P)})}function q(P,O){var N=new FileReader();N.name=O;N.onloadend=function(Q){v(Q)};N.readAsDataURL(P)}function w(N){N=N.replace(/\..+$/,"").replace(/\W+/,"-").replace(/-|_/," ").replace(/^([a-z])|\s+([a-z])/g,function(O){return O.toUpperCase()});return r(N)}function r(N){return N.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/\b([A-Z]+)([A-Z])([a-z])/,"$1 $2$3").replace(/^./,function(O){return O.toUpperCase()})}function g(N){var P=N.originalEvent.dataTransfer,O=P.files,U=O.length,Q=/^.*\.(ttf|otf|woff)$/i;e(N);for(var T=0;T<U;T++){var R=O[T],S=R.name,V;if(S.match(Q)){V=w(S);q(R,V)}else{alert("Invalid file extension. Will only accept ttf, otf, or woff font files")}}}function v(O){var N=O.target.name,P=O.target.result;var Q=P.split("base64");if(Q[0].indexOf("application/octet-stream")==-1){Q[0]="data:application/octet-stream;base64";P=Q[0]+Q[1]}s("<style type='text/css'>@font-face{font-family: "+N+"; src:url("+P+");}</style> ").appendTo("head");B([N]);s("#ff-font-family-custom").find("li:last").click()}function e(N){N.stopPropagation();N.preventDefault()}function d(R){var N=R.length,Q={},P=[],O;for(O=0;O<N;O+=1){Q[R[O]]=R[O]}for(O in Q){P.push(Q[O])}return P}function k(){var N=s("#font-friend");A.width=N.outerWidth();A.height=N.outerHeight();s("#ff-toggle").toggle(function(){N.removeClass("open").animate({height:16,width:16},100)},function(){N.addClass("open").animate({height:A.height,width:A.width},100)});s("#ff-drop ul > li").live("click",function(){if(s(this).children("input").length){return false}var Q=s(this),S=Q.parent().attr("data-ff"),T=Q.text(),R=P();if(S=="fontFamily"){O(T,R)}else{s(R).css(S,T)}});function P(){var R=s("#ff-drop ol input:checked").next(),Q=R.text()||R.val();return Q}function O(R,Q){Q=Q||P();D(R);R=h(R);s(Q).css("fontFamily",R)}s("#ff-drop select").change(function(){var R=s(this).attr("data-ff"),S=parseFloat(s(this).find("option:selected").val()),Q=P();s(Q).css(R,S)});s("#ff-drop li.family-custom").unbind();s("#family-custom").keyup(function(R){var S=s("#family-custom").attr("value"),Q=P();if(R.keyCode==13){s("#family-custom-add").click()
}else{O(S,Q)}e(R)});s("#ff-controls div").click(function(){if(s(this).hasClass("left")){s("#font-friend").css({left:30,right:"auto"})}if(s(this).hasClass("right")){s("#font-friend").css({right:30,left:"auto"})}if(s(this).hasClass("up")){s("#font-friend").css({top:0,bottom:"auto"})}if(s(this).hasClass("down")){s("#font-friend").css({bottom:0,top:"auto"})}});s("#ff-blah, #family-custom").each(function(Q){s(this).attr("data-ff",s(this).attr("value"))}).click(function(){s(this).prev().attr("checked","checked");if(s(this).attr("value")==s(this).attr("data-ff")){s(this).removeAttr("value")}else{s(this).select()}});s("#ff-clear").click(function(){s("*").not("[data-ff=fontFamily]").removeAttr("style");K();D()});s("#family-custom-add").click(function(){var Q=s(this).prev(),R=Q.val();if(R!=="your font family"&&R!==""){B([R]);Q.val("").select()}});s("#ff-font-drop").bind("dragover",e).bind("dragenter dragleave",function(Q){s(this).toggleClass("dropzone");e(Q)}).bind("drop",g)}}(this,this.document));